---
title: 5G网络架构与组网部署
mathjax: true
date: 2024-03-25 21:53:22
tags: [5G,网络架构,组网部署]
categories: [移动通信]
comment: true
---

# 5G网络架构与组网部署

> 学习目标：
>
> - 掌握5G网络整体架构组成
> - 掌握主要网元功能
> - 了解网元间接口关系
> - 了解5G网络组网部署策略
>
> 参考书目：
>
> - 5G网络设计白皮书
> - 5G无线技术架构
> - 5G无线云网络总体技术报告

## 1.1 5G网络架构的演进趋势

### 1.1.1 概述

#### 1. 5G移动通信系统整体架构

5G移动通信系统包括 5GC(5G Core Network ， 5G核心网)，和 NG - RAN(Next Generation Radio Access Network ， 5G无线接入网)。5G 核心网与 5G 接入网通过 NG 接口连接，实现控制面和用户面控制；5G无线接入网之间通过 Xn 接口连接，实现控制面（信令）和用户面（用户数据）功能。5G 移动通信系统整体架构如图 1- 1 所示：

![5G移动通信系统整体架构](G:/%E6%96%87%E4%BB%B6%E5%A4%B9/%E5%AD%A6%E4%B9%A0/%E7%AB%9E%E8%B5%9B/%E5%A4%A7%E5%94%90/5G%E7%BD%91%E7%BB%9C%E6%9E%B6%E6%9E%84%E4%B8%8E%E7%BB%84%E7%BD%91%E9%83%A8%E7%BD%B2/5G%E7%A7%BB%E5%8A%A8%E9%80%9A%E4%BF%A1%E7%B3%BB%E7%BB%9F%E6%95%B4%E4%BD%93%E6%9E%B6%E6%9E%84.png)

 其中，gNB 是 5G 的基站，eNB是 4G 的基站，ng-eNB 则表示 (Next Generation)，即下一代无线接入网（4G 增强型基站，可以实现部分5G 基站的功能），

AMF / UPF / SMF 是核心网的网元，UPF 主要实现用户面的功能，AMF / SAMF 主要用于控制面的功能，AMF 主要用于接入移动性管理。

#### 2. 4G移动通信系统整体架构

 4G移动通信系统包括 EPC(Evolved Packet Core network ， 演进分组核心网)和 E - UTRAN(EVolved Universal Terrestrial Radio Access Network ， 演进通用陆地无线接入网络)。4G 移动通信系统整体架构如下图 1 - 2 所示：

![4G移动通信系统整体架构](G:/%E6%96%87%E4%BB%B6%E5%A4%B9/%E5%AD%A6%E4%B9%A0/%E7%AB%9E%E8%B5%9B/%E5%A4%A7%E5%94%90/5G%E7%BD%91%E7%BB%9C%E6%9E%B6%E6%9E%84%E4%B8%8E%E7%BB%84%E7%BD%91%E9%83%A8%E7%BD%B2/4G%E7%A7%BB%E5%8A%A8%E9%80%9A%E4%BF%A1%E7%B3%BB%E7%BB%9F%E6%95%B4%E4%BD%93%E6%9E%B6%E6%9E%84.png)

其中，eNB 为 4G 基站，基站间使用的是 X2 接口，不同于 5G 基站间 Xn 的接口，

MME 主要负责移动性管理，S - GW 主要用于实现用户面功能（网关）。

#### 3. 4G与5G移动通信系统整体架构对比

5G 移动通信系统整体架构与 4G 整体架构类似。 4G 与 5G移动通信系统整体架构对比如下图 1- 3所示：RAN 网络引入 CU（集中单元 Centralized Unit） 、 DU（分布单元 Distributed Unit） ， 组网更灵活，利于多小区的集中控制，利于多功能的实现。 MEC (Multi-access Edgea Connection， 多接入边缘计算)是支撑 5G 系统运行的关键技术。

DU负责独立、实时性要求高的功能；CU负责需要信息汇聚、实时性要求低的功能。

![4g与5g移动通信系统整体架构对比](G:/%E6%96%87%E4%BB%B6%E5%A4%B9/%E5%AD%A6%E4%B9%A0/%E7%AB%9E%E8%B5%9B/%E5%A4%A7%E5%94%90/5G%E7%BD%91%E7%BB%9C%E6%9E%B6%E6%9E%84%E4%B8%8E%E7%BB%84%E7%BD%91%E9%83%A8%E7%BD%B2/4g%E4%B8%8E5g%E7%A7%BB%E5%8A%A8%E9%80%9A%E4%BF%A1%E7%B3%BB%E7%BB%9F%E6%95%B4%E4%BD%93%E6%9E%B6%E6%9E%84%E5%AF%B9%E6%AF%94.png)

 图中，下半部分对应接入网部分，上半部分对应核心网部分，5G 结构改变，BBU 的功能通过 CU + DU （合设，左；分离，右）来体现（利于集中化管理，一个 CU 下可挂载多个 DU），射频单元 RRU 演变成了 AAU（引入了有源天线），也就是说 AAU 实现了 4G 中 RRU + 天线 的功能，

MEC 称为多接入边缘计算，将 5GC 的功能下放到 MEC 进行实现。

### 1.1.2 核心网架构演进

网络架构演进的核心目标：

- 实现从“互联网应用被动适应网络”向“网络主动、快速、灵活适应互联网应用”
- 网络和资源的部署将打破行政管理体制和传统组网思路的制约，转向以 IDC 为核心的新格局
- 不同阶段核心网技术特征与代表技术如下图  1- 4 所示：

![不同阶段核心网技术特征与代表技术](G:/%E6%96%87%E4%BB%B6%E5%A4%B9/%E5%AD%A6%E4%B9%A0/%E7%AB%9E%E8%B5%9B/%E5%A4%A7%E5%94%90/5G%E7%BD%91%E7%BB%9C%E6%9E%B6%E6%9E%84%E4%B8%8E%E7%BB%84%E7%BD%91%E9%83%A8%E7%BD%B2/%E4%B8%8D%E5%90%8C%E9%98%B6%E6%AE%B5%E6%A0%B8%E5%BF%83%E7%BD%91%E6%8A%80%E6%9C%AF%E7%89%B9%E5%BE%81%E4%B8%8E%E4%BB%A3%E8%A1%A8%E6%8A%80%E6%9C%AF.png)

接入网（收集数据），承载网（前传、中传、回传，传输数据），核心网的本质——路由交换（处理数据与分发），

5G 网络 模块化，软件化以满足不同场景的需要。

移动通信系统核心网从 3G 到 4G 的演进特点是 取消了 CS 域（Circuit Switch ， 电路交换域）只保留 PS 域（Packett Switch， 分组交换域）。4G 移动通信系统实现了控制和承载相分离， 4G 核心网架构如下图 1 - 5 所示：

![4g核心网架构](G:/%E6%96%87%E4%BB%B6%E5%A4%B9/%E5%AD%A6%E4%B9%A0/%E7%AB%9E%E8%B5%9B/%E5%A4%A7%E5%94%90/5G%E7%BD%91%E7%BB%9C%E6%9E%B6%E6%9E%84%E4%B8%8E%E7%BB%84%E7%BD%91%E9%83%A8%E7%BD%B2/4g%E6%A0%B8%E5%BF%83%E7%BD%91%E6%9E%B6%E6%9E%84.png)

5G 核心网颠覆了 4G 核心网的设计思路， 5G 核心网基于 SBA 实现（Service Based Architecture， 基于服务架构），使用 NFV 技术灵活重构网络功能，使用 SDN 技术灵活构建数据转发通道，使用切片技术实现业务保障与资源利用率最大化，完全实现 CUPS （Control and User Plane Separation， 控制与用户面分离），结合云技术全面支撑 5G 应用场景需求。为了应对 5G 网络的发展要求，基于服务的 5G 核心网架构如下图 1 - 6 所示：

![基于服务的5G核心网架构](G:/%E6%96%87%E4%BB%B6%E5%A4%B9/%E5%AD%A6%E4%B9%A0/%E7%AB%9E%E8%B5%9B/%E5%A4%A7%E5%94%90/5G%E7%BD%91%E7%BB%9C%E6%9E%B6%E6%9E%84%E4%B8%8E%E7%BB%84%E7%BD%91%E9%83%A8%E7%BD%B2/%E5%9F%BA%E4%BA%8E%E6%9C%8D%E5%8A%A1%E7%9A%845G%E6%A0%B8%E5%BF%83%E7%BD%91%E6%9E%B6%E6%9E%84.png)

### 1.1.3 无线接入网演进

从2G（第二代移动通信系统）开始到现在的5G（第五代移动通信系统），无线接入网技术一直处于变化之中，无线接入网的实现方式也呈现出“分合分”的表象，无线接入网的发展与演进如下图 1 - 7 所示：

![无线接入网的发展与演进](G:/%E6%96%87%E4%BB%B6%E5%A4%B9/%E5%AD%A6%E4%B9%A0/%E7%AB%9E%E8%B5%9B/%E5%A4%A7%E5%94%90/5G%E7%BD%91%E7%BB%9C%E6%9E%B6%E6%9E%84%E4%B8%8E%E7%BB%84%E7%BD%91%E9%83%A8%E7%BD%B2/%E6%97%A0%E7%BA%BF%E6%8E%A5%E5%85%A5%E7%BD%91%E7%9A%84%E5%8F%91%E5%B1%95%E4%B8%8E%E6%BC%94%E8%BF%9B.png)





## 1.2 5G网元功能与接口

### 1.2.1 5G移动通信整体网络架构

5G 网络功能之间的信息交互可以基于两种方式表示：

- 基于服务表示；
- 基于点对点表示

实际部署时，也可以采用两种方式相结合的表示方式，因为并不是所有的接口都适合基于服务表示，对于有些接口点对点表示方式更加适合，从图 1 - 8 可以看出，控制面内的网络功能（例如 AMF）使其他授权的网络功能能够访问其他服务。但是，对于接口 N1 和 接口 N2 ，这种表示还包括必要时的点对点表示方式。

![非漫游5G移动通信系统架构-SBA](G:/%E6%96%87%E4%BB%B6%E5%A4%B9/%E5%AD%A6%E4%B9%A0/%E7%AB%9E%E8%B5%9B/%E5%A4%A7%E5%94%90/5G%E7%BD%91%E7%BB%9C%E6%9E%B6%E6%9E%84%E4%B8%8E%E7%BB%84%E7%BD%91%E9%83%A8%E7%BD%B2/%E9%9D%9E%E6%BC%AB%E6%B8%B85G%E7%A7%BB%E5%8A%A8%E9%80%9A%E4%BF%A1%E7%B3%BB%E7%BB%9F%E6%9E%B6%E6%9E%84-SBA.png)

非漫游与漫游的区别方式：看终端与访问端是否归属于同一地址；

NSSF 通过 Nnssf 接口与其他核心通信，接口通过**服务注册**与**服务发现**完成其功能，优点是不需要知道对方地址也能进行访问，

> 服务注册：将提供某个服务的模块信息（通常是服务的 ip 和端口）注册到1个公共的组件上去；
>
> 服务发现：新注册的服务模块能够及时被其他调用者发现，不管是服务新增和服务删减都能自动实现；
>
> 主要用于分布式微服务，原先所有服务混在一台服务器里，想再将其按照功能或对象拆分成 N 个服务模块，优点是利于深度解耦，能够实现快速的迭代更新，缺点是服务的管理和控制变得复杂和繁琐，维护难度变大，排查问题困难；

图中上方的信息方式是基于服务的，下方则是基于点对点表示的，

不同于基于服务表示，点对点相互通信需要提前约定相互访问的接口，

5G 移动通信系统点到点表示，如下图 1 - 9 所示，

![非漫游5G移动通信系统架构-点到点表示](G:/%E6%96%87%E4%BB%B6%E5%A4%B9/%E5%AD%A6%E4%B9%A0/%E7%AB%9E%E8%B5%9B/%E5%A4%A7%E5%94%90/5G%E7%BD%91%E7%BB%9C%E6%9E%B6%E6%9E%84%E4%B8%8E%E7%BB%84%E7%BD%91%E9%83%A8%E7%BD%B2/%E9%9D%9E%E6%BC%AB%E6%B8%B85G%E7%A7%BB%E5%8A%A8%E9%80%9A%E4%BF%A1%E7%B3%BB%E7%BB%9F%E6%9E%B6%E6%9E%84-%E7%82%B9%E5%88%B0%E7%82%B9%E8%A1%A8%E7%A4%BA.png)

5G 无线接入网的基站网元功能拆分为 CU（Centralized Unit ， 集中单元）和 DU（Distributed Unit ， 分布单元）。5G 移动通信系统 NG - RAN CU 与 DU 分离逻辑图，如下图 1 - 10 所示，

![5G移动通信系统NG-RAN CU与DU分离逻辑图](G:/%E6%96%87%E4%BB%B6%E5%A4%B9/%E5%AD%A6%E4%B9%A0/%E7%AB%9E%E8%B5%9B/%E5%A4%A7%E5%94%90/5G%E7%BD%91%E7%BB%9C%E6%9E%B6%E6%9E%84%E4%B8%8E%E7%BB%84%E7%BD%91%E9%83%A8%E7%BD%B2/5G%E7%A7%BB%E5%8A%A8%E9%80%9A%E4%BF%A1%E7%B3%BB%E7%BB%9FNG-RAN%20CU%E4%B8%8EDU%E5%88%86%E7%A6%BB%E9%80%BB%E8%BE%91%E5%9B%BE.png)

CU 与 DU 分离 options 如下图 1 - 11 所示，

![CU与DU分离options](G:/%E6%96%87%E4%BB%B6%E5%A4%B9/%E5%AD%A6%E4%B9%A0/%E7%AB%9E%E8%B5%9B/%E5%A4%A7%E5%94%90/5G%E7%BD%91%E7%BB%9C%E6%9E%B6%E6%9E%84%E4%B8%8E%E7%BB%84%E7%BD%91%E9%83%A8%E7%BD%B2/CU%E4%B8%8EDU%E5%88%86%E7%A6%BBoptions.png)

- 底层功能划分方案：
  - 便于控制面集中，利于无线资源干扰协调；
  - 可采用虚拟化平台；
- 高层功能划分方案： 3GPP 标准确定了 option2：
  - PDCP 上移便于形成数据锚点，便于支持用户面的双连接/多连接；

 ![CU、DU方案策略比较](G:/%E6%96%87%E4%BB%B6%E5%A4%B9/%E5%AD%A6%E4%B9%A0/%E7%AB%9E%E8%B5%9B/%E5%A4%A7%E5%94%90/5G%E7%BD%91%E7%BB%9C%E6%9E%B6%E6%9E%84%E4%B8%8E%E7%BB%84%E7%BD%91%E9%83%A8%E7%BD%B2/CU%E3%80%81DU%E6%96%B9%E6%A1%88%E7%AD%96%E7%95%A5%E6%AF%94%E8%BE%83.png)

Option4：对传输时要要求很高，且未看到其他性能增益，后续基本不考虑该方案。

### 1.2.2 5G主要网元功能

5G 系统由接入网（AN）和核心网（5GC）组成，AN 与 5GC 的主要功能如下图 1 - 12 所示：

![NG-RAN与5GC的主要功能](G:/%E6%96%87%E4%BB%B6%E5%A4%B9/%E5%AD%A6%E4%B9%A0/%E7%AB%9E%E8%B5%9B/%E5%A4%A7%E5%94%90/5G%E7%BD%91%E7%BB%9C%E6%9E%B6%E6%9E%84%E4%B8%8E%E7%BB%84%E7%BD%91%E9%83%A8%E7%BD%B2/NG-RAN%E4%B8%8E5GC%E7%9A%84%E4%B8%BB%E8%A6%81%E5%8A%9F%E8%83%BD.png)

#### 核心网主要功能：

UPF 主要用于用户面功能，

- gNodeB 间切换的本地移动锚点（适用时）
- 连接到移动通信网络的外部 PDU 会话点
- 基于 N 接口切换过程中，数据包路由与转发
- 数据包检查和用户面部分的策略计费
- 合法的监听拦截（集合）
- 流量使用情况报告
- Uplink 支持路由流量到一个数据网络
- 分支点以支持多类的 PDU 会话
- 对用户面的 QoS 处理，例如包过滤、门控、 ul/dl速率执行
- Uplink 流量验证（SDF 到 Qos 流映射）
- 上下行链路上传输级别的数据包标记
- 下行数据包缓冲和下行数据通知触发

SMF 主要用于会话管理功能， 

- 会话的建立修改删除
- 包括 tunnel maintain between UPF and AN node
- UE IP 地址的分配和管理
- DHCPv4 (server and client) and DHCPv6(server and client)functions
- 选择控制用户面功能
- Qos 的策略与控制，终止策略控制
- 合法监听
- Termination of SM parts of NAS messages
- 下行数据的通知
- 漫游功能

AMF 主要用于访问和移动性管理功能，

- NAS 信令及信令的加密和完整性保护
- 终止运行 RAN 网络接口（N2）
- 注册管理
- 连接管理
- NAS 移动性管理
- 合法的截距（用于 AMF 事件和对 LI 系统的接口）
- 为在 UE 和 SMF 之间的 SM 消息提供传输
- 路由 SM 消息的透明代理
- 访问验证
- 在 UE 和 SMSF 之间提供 SMS 消息的传输
- 用户鉴权及密钥管理
- 承载管理功能，包括专用承载建立过程

#### 接入网主要功能：

gNB/en-gNB基站功能，

CU-C(Central Unit Control plane) 主要用于控制面功能，

- Interface Management：Xn/NG/F1/E1 等接口链路管理、接口消息处理（如：NG-AP）和数据处理（如：GTP-U）
- Connection Management：单连接、双连接、多连接和 D2D
- Traffic Steering：系统内和系统间的负载均衡
- Slice Support：系统能和系统间的切片资源动态管理

CU-U(Central Unit User plane) 

- 数据包的处理和转换

DU(Distributed Unit)

- 资源的调度
- 传输模式的转换
- 信道映射

AAU-RF(Radio Frequcency)

- 信号的手法
- MAssive
- MIMO 天线处理
- 频率与时间同步
- AAS实现机制

### 1.2.3 5G系统接口功能与协议

5G 系统的接口非常多，如果考虑接口间的协同工作及相互影响，可能涉及内容更多，本节内容仅针对 NG 接口、 Xn接口、F1 接口、E1 接口和 Uu 接口进行描述。5G 系统接入网（AN）和核心网（5GC）的主要接口如图 1 - 13 所示：

![AN与5GC的主要接口](G:/%E6%96%87%E4%BB%B6%E5%A4%B9/%E5%AD%A6%E4%B9%A0/%E7%AB%9E%E8%B5%9B/%E5%A4%A7%E5%94%90/5G%E7%BD%91%E7%BB%9C%E6%9E%B6%E6%9E%84%E4%B8%8E%E7%BB%84%E7%BD%91%E9%83%A8%E7%BD%B2/AN%E4%B8%8E5GC%E7%9A%84%E4%B8%BB%E8%A6%81%E6%8E%A5%E5%8F%A3.png)

#### NG 接口：

NG 接口是 NG - RAN 和 5G 核心网之间的接口，支持控制面和用户面分离，支持模式化设计、 NG 接口协议栈 如图 1 - 14 所示，其中左侧表示控制面协议栈（NG-C 接口），右图表示用户面协议栈（NG-U 接口）。

![NG接口协议栈](G:/%E6%96%87%E4%BB%B6%E5%A4%B9/%E5%AD%A6%E4%B9%A0/%E7%AB%9E%E8%B5%9B/%E5%A4%A7%E5%94%90/5G%E7%BD%91%E7%BB%9C%E6%9E%B6%E6%9E%84%E4%B8%8E%E7%BB%84%E7%BD%91%E9%83%A8%E7%BD%B2/NG%E6%8E%A5%E5%8F%A3%E5%8D%8F%E8%AE%AE%E6%A0%88.png)

NG-C 接口与流程如表 1 - 2 所示：

<div align = "center"><b>表1-2 NG-C接口与流程</bb></div>

![NG-C流程](G:/%E6%96%87%E4%BB%B6%E5%A4%B9/%E5%AD%A6%E4%B9%A0/%E7%AB%9E%E8%B5%9B/%E5%A4%A7%E5%94%90/5G%E7%BD%91%E7%BB%9C%E6%9E%B6%E6%9E%84%E4%B8%8E%E7%BB%84%E7%BD%91%E9%83%A8%E7%BD%B2/NG-C%E6%B5%81%E7%A8%8B.png)

NG-U 接口主要功能：

- NG-U 接口在 NG-RAN 节点和 UPF 之间提供非保证的用户平面 PDU 传送
- 协议栈传输网络层建立在 IP 传输上
- GTP-U 在 UDP/IP 之上用于承载 NG-RAN 节点和 UPF 之间的用户面 PDU

#### Xn 接口：

Xn 接口是 NG-RAN 之间的接口，Xn 接口协议栈如下图 1 - 15 所示，其中左侧表示控制面协议栈（Xn-C 接口），右侧表示用户面协议栈（Xn-U 接口）。在 CU/DU分离的情况下，Xn-C 是 CU-C 之间的接口， Xn-U 是 CU-U 之间的接口，

![Xn接口协议栈](G:/%E6%96%87%E4%BB%B6%E5%A4%B9/%E5%AD%A6%E4%B9%A0/%E7%AB%9E%E8%B5%9B/%E5%A4%A7%E5%94%90/5G%E7%BD%91%E7%BB%9C%E6%9E%B6%E6%9E%84%E4%B8%8E%E7%BB%84%E7%BD%91%E9%83%A8%E7%BD%B2/Xn%E6%8E%A5%E5%8F%A3%E5%8D%8F%E8%AE%AE%E6%A0%88.png)

Xn-C 接口功能如下表 1 - 3 所示：

<div align = "center"><b>表1-3 Xn-C接口与流程</bb></div>

![Xn-c接口与流程](G:/%E6%96%87%E4%BB%B6%E5%A4%B9/%E5%AD%A6%E4%B9%A0/%E7%AB%9E%E8%B5%9B/%E5%A4%A7%E5%94%90/5G%E7%BD%91%E7%BB%9C%E6%9E%B6%E6%9E%84%E4%B8%8E%E7%BB%84%E7%BD%91%E9%83%A8%E7%BD%B2/Xn-c%E6%8E%A5%E5%8F%A3%E4%B8%8E%E6%B5%81%E7%A8%8B.png)

Xn-U 接口的主要功能：

- Xn-U 接口提供用户平面 PDU 的非保证传送，并支持分离 Xn 接口为无线网络功能和传输网络功能，以促进未来技术的引入
- 数据转发功能，允许 NG-RAN 节点间数据转发从而支持双连接和移动性操作
- 流控制功能，允许 NG-RAN 节点接收第二个节点的用户面数据从而提供数据流相关的反馈信息

#### E1接口：

CU/DU 分离场景下，E1 接口是指 CU-C 与 CU–U 之间的接口， E1 接口只有控制面接口（E1-C 接口），E1 接口市开放接口，支持端点之间信令信息的交换，支持 5G 系统新服务和新功能， E1-C 接口不能用于用户数据转发， E1 接口协议栈如下图 1 - 16 所示：

![E1接口协议栈](G:/%E6%96%87%E4%BB%B6%E5%A4%B9/%E5%AD%A6%E4%B9%A0/%E7%AB%9E%E8%B5%9B/%E5%A4%A7%E5%94%90/5G%E7%BD%91%E7%BB%9C%E6%9E%B6%E6%9E%84%E4%B8%8E%E7%BB%84%E7%BD%91%E9%83%A8%E7%BD%B2/E1%E6%8E%A5%E5%8F%A3%E5%8D%8F%E8%AE%AE%E6%A0%88.png)

E1 接口功能如下表 1 - 4 所示：

<div align = "center"><b>表1-4 E1接口与流程</bb></div>

![E1接口功能](G:/%E6%96%87%E4%BB%B6%E5%A4%B9/%E5%AD%A6%E4%B9%A0/%E7%AB%9E%E8%B5%9B/%E5%A4%A7%E5%94%90/5G%E7%BD%91%E7%BB%9C%E6%9E%B6%E6%9E%84%E4%B8%8E%E7%BB%84%E7%BD%91%E9%83%A8%E7%BD%B2/E1%E6%8E%A5%E5%8F%A3%E5%8A%9F%E8%83%BD.png)

#### F1 接口：

CU/DU 分离场景下，F1 接口是指 CU 与 DU 之间的接口， 区分为用户面接口（F1-U 接口）和控制面接口（F1-C 接口），F1 接口支持 eNB-point 之间的**信令交互**，包括支持不同 eNB-point 的数据发送， F1 接口协议栈如下图 1 -17 所示，其中左侧表示**控制面**协议栈（F1-C 接口），右侧表示**用户面**协议栈（F1-U 接口），用户面数据与控制面信令对传输可靠性与有效性要求不同，控制面强调可靠性，用户面强调效率，故使用协议不同。

![F1接口协议栈](G:/%E6%96%87%E4%BB%B6%E5%A4%B9/%E5%AD%A6%E4%B9%A0/%E7%AB%9E%E8%B5%9B/%E5%A4%A7%E5%94%90/5G%E7%BD%91%E7%BB%9C%E6%9E%B6%E6%9E%84%E4%B8%8E%E7%BB%84%E7%BD%91%E9%83%A8%E7%BD%B2/F1%E6%8E%A5%E5%8F%A3%E5%8D%8F%E8%AE%AE%E6%A0%88.png)

F1 接口功能如下表 1 - 5 所示：

<div align = "center"><b>表1-5 F1接口与功能</bb></div>

![F1接口主要功能](G:/%E6%96%87%E4%BB%B6%E5%A4%B9/%E5%AD%A6%E4%B9%A0/%E7%AB%9E%E8%B5%9B/%E5%A4%A7%E5%94%90/5G%E7%BD%91%E7%BB%9C%E6%9E%B6%E6%9E%84%E4%B8%8E%E7%BB%84%E7%BD%91%E9%83%A8%E7%BD%B2/F1%E6%8E%A5%E5%8F%A3%E4%B8%BB%E8%A6%81%E5%8A%9F%E8%83%BD.png)

#### Uu接口：

终端与基站之间使用 Uu 接口，其控制面协议栈如下图 1 - 18 所示，

![Uu口控制面协议栈](G:/%E6%96%87%E4%BB%B6%E5%A4%B9/%E5%AD%A6%E4%B9%A0/%E7%AB%9E%E8%B5%9B/%E5%A4%A7%E5%94%90/5G%E7%BD%91%E7%BB%9C%E6%9E%B6%E6%9E%84%E4%B8%8E%E7%BB%84%E7%BD%91%E9%83%A8%E7%BD%B2/Uu%E5%8F%A3%E6%8E%A7%E5%88%B6%E9%9D%A2%E5%8D%8F%E8%AE%AE%E6%A0%88.png)

终端可以与核心网直接基于 NAS 层进行交互，此时基站起到透传的作用，控制面的主要功能为：

- RLC 和 MAC 层功能与用户面中的功能一致
- PDCP 层完成加密和完整性保护
- RRC 层完成广播，寻呼， RRC 连接管理， 资源控制，移动性管理，UE 测量报告控制
- NAS 层完成核心网承载管理，鉴权及安全控制

Uu和接口用户面协议栈如图 1- 19 所示，

![Uu口用户面协议栈](G:/%E6%96%87%E4%BB%B6%E5%A4%B9/%E5%AD%A6%E4%B9%A0/%E7%AB%9E%E8%B5%9B/%E5%A4%A7%E5%94%90/5G%E7%BD%91%E7%BB%9C%E6%9E%B6%E6%9E%84%E4%B8%8E%E7%BB%84%E7%BD%91%E9%83%A8%E7%BD%B2/Uu%E5%8F%A3%E7%94%A8%E6%88%B7%E9%9D%A2%E5%8D%8F%E8%AE%AE%E6%A0%88.png)

用户面的主要功能为:

- 头压缩，加密，调度，ARQ/HARQ
- 5G 用户面增加新的协议层 SDAP（Service Data Adapatation Protocol），完成流（5G QoS flow）到无线承载（DRB）的 QoS 映射，为每个报文打上流标识（QFI： QoS flow ID）
- PDCP 相较于控制面没有完整性保护的功能，仅起到头压缩，加密的功能
- RLC 功能同控制面一致，分段，级联，传输模式的映射，ARQ
- MAC 调度，前向纠错，混合自动重传

NAS 层是控制面功能，位于核心网的 AMF 与终端之间，功能包括核心网承载管理、注册管理、连接管理、会话管理、鉴权、安全性和策略控制，基于服务的 NAS 接口如图 1- 20 所示，

![基于服务的NAS接口](G:/%E6%96%87%E4%BB%B6%E5%A4%B9/%E5%AD%A6%E4%B9%A0/%E7%AB%9E%E8%B5%9B/%E5%A4%A7%E5%94%90/5G%E7%BD%91%E7%BB%9C%E6%9E%B6%E6%9E%84%E4%B8%8E%E7%BB%84%E7%BD%91%E9%83%A8%E7%BD%B2/%E5%9F%BA%E4%BA%8E%E6%9C%8D%E5%8A%A1%E7%9A%84NAS%E6%8E%A5%E5%8F%A3.png)



## 1.3 5G网络组网部署

### 1.3.1 SA 组网和 NSA 组网

根据 3GPP（3rd Generation Partnership Project） 定义，5G 标准分为非独立组网（NSA，Non-Standaloine）和独立组网（SA，Standalone）两种模式，

SA 组网是指使能 5G 网络不需要其他移动通信系统的辅助，可以独立进行工作。

NSA 组网是指使能 5G 网络需要其他移动通信系统的辅助，如果辅助缺失，那么 5G 网络不可以独立进行工作。通常而言，5G 网络建设阶段， NSA 组网方式是在表明 5G 网络的使用需要 4G 网络进行辅助。

5G 移动通信系统的接入网有两种表现方式：**ng-eNB** 和 **gNB**

ng-eNB 和 gNB 都可以独立地承担与核心网之间控制面和用户面的连接，不需要其他接入网网元辅助，针对 5G 移动通信系统 3GPP 确定的 SA options 如下图 1- 21所示，

![SA组网方案](G:/%E6%96%87%E4%BB%B6%E5%A4%B9/%E5%AD%A6%E4%B9%A0/%E7%AB%9E%E8%B5%9B/%E5%A4%A7%E5%94%90/5G%E7%BD%91%E7%BB%9C%E6%9E%B6%E6%9E%84%E4%B8%8E%E7%BB%84%E7%BD%91%E9%83%A8%E7%BD%B2/SA%E7%BB%84%E7%BD%91%E6%96%B9%E6%A1%88.png)

其中左侧，对应接入网使用 eNB 表示，称之为 option2；右侧对应接入网使用 ng-eNB 表示，称之为 option5。

#### NSA 组网：

##### NSA option 3

3GPP 确定的 NSA option 3 系列 如下图 1 - 22 所示，

![NSA Option3系列](G:/%E6%96%87%E4%BB%B6%E5%A4%B9/%E5%AD%A6%E4%B9%A0/%E7%AB%9E%E8%B5%9B/%E5%A4%A7%E5%94%90/5G%E7%BD%91%E7%BB%9C%E6%9E%B6%E6%9E%84%E4%B8%8E%E7%BB%84%E7%BD%91%E9%83%A8%E7%BD%B2/NSA%20Option3%E7%B3%BB%E5%88%97.png)

- Option：4G 基站作为 主节点/锚点站， 5G 基站作为辅节点，控制面信令只能通过 4G 基站发送；数据可以通过主节点进行分流；
- Option 3A：5G 基站与核心网有 S1-U 接口建立的用户面连接；
- Option 3X：同时与主节点与核心网建立用户面连接，防止主节点数据量过大过载；

2017 年 12 月制定：4G 基站（eNB）和 5G 基站（gNB）公用 4G 核心网（EPC），LTE eNB 和 5G gNB 用户面可以直接连接到 EPC，控制面则仅经由 LTE eNB 连接到 EPC，用户面可以分别经由 LETE eNB、EPC 或者 gNB 进行分流。优势在于不必新增 5G 核心网，利用运营商现有 4G 网络基础设施快速部署 5G，抢占覆盖和热点。但是 5G 信令全走 4G 通道，有 4G 核心网信令过载风险，因此该阶段主要解决初期的 5G 覆盖。

##### NSA option 7

3GPP 确定的 NSA option 7 系列如下图 1 - 23 所示，

![NSA Option7系列](G:/%E6%96%87%E4%BB%B6%E5%A4%B9/%E5%AD%A6%E4%B9%A0/%E7%AB%9E%E8%B5%9B/%E5%A4%A7%E5%94%90/5G%E7%BD%91%E7%BB%9C%E6%9E%B6%E6%9E%84%E4%B8%8E%E7%BB%84%E7%BD%91%E9%83%A8%E7%BD%B2/NSA%20Option7%E7%B3%BB%E5%88%97.png)

- Option 7：5G 核心网与 4G 增强型基站直接连接，并通过 4G 增强型基站转发数据；
- Option 7A：4G 基站仅起到传输信令作用；
- Option 7X：大多数数据从 5G 基站进行接收；

2018 年 12 月确定：增强型 4G 基站（ng-eNB）与 5G基站（gNB）共用 5G 核心网（5GC），该阶段 5G 核心网代替了 4G 核心网，控制面则仅经由 ng-eNB 连接到 5GC，用户面可以分别经由 ng-eNB、5GHC 或者 gNB 进行分流，解决了 4G 核心网心灵过载风险，主要面向 5G 容量需求。

数据锚点：5G NR 接入网做数据锚点支持 X 架构（LTE 设备处理能力弱于 NR，不适合做锚点）

##### NSA option4

3GPP 确定的 NSA option4 系列如下图 1 - 24 所示，

![NSA Option4系列](G:/%E6%96%87%E4%BB%B6%E5%A4%B9/%E5%AD%A6%E4%B9%A0/%E7%AB%9E%E8%B5%9B/%E5%A4%A7%E5%94%90/5G%E7%BD%91%E7%BB%9C%E6%9E%B6%E6%9E%84%E4%B8%8E%E7%BB%84%E7%BD%91%E9%83%A8%E7%BD%B2/NSA%20Option4%E7%B3%BB%E5%88%97.png)

2019 年 12 月确定：增强型 4G 基站（ng-eNB）与 5G 基站（gNB）共用 5G 核心网（5GC），该阶段 5G 核心网替代了 4G 核心网，控制面则仅经由 5G gNB 连接到 5GC， 用户面可以分别经由 gNB、5GC 进行分流。该阶段不仅面向 5G 的增强型移动带宽场景（eMBB，Enhanced Mobile Broadband），还面向大规模网联网（mMTC，Maritime Mobile Telegraphy Calling）和低时延高可靠物联网（uRLLC，Ultra Reliable Low Latency Communication）。是面向万物连接时代 5G 的多样化业务。

3GPP 协议标准定义的基站如下表 1 - 6 所示，

<div align = "center"><b>表1-6 基站名称及其定义</bb></div>

| 基站名称 |    面向对象    |             提供协议             |             接口与节点              |
| :------: | :------------: | :------------------------------: | :---------------------------------: |
|   eNB    | 面向终端（UE） | 提供 E-URTRAN 用户面和控制面协议 |  通过 S1 接口连接到 EPC 的网络节点  |
|  ng-eNB  | 面向终端（UE） | 提供 E-UTRAN 用户面和控制面协议  |  通过 NG 接口连接到 5GC 的网络节点  |
|   gNB    | 面向终端（UE） |    提供 NR 用户面和控制面协议    |  通过 NG 接口连接到 5GC 的网络节点  |
|  en-gNB  | 面向终端（UE） |    提供 NR 用户面和控制面协议    | 通过 S1-U 接口连接到 EPC 的网络节点 |

SA 和 NSA 组网方案对比如下表 1 - 7 所示，

<div align = "center"><b>表1-7 SA 和 NSA 组网方案对比</bb></div>

|        分类         |                    非独立 NR （NSA）架构                     |                     独立 NR（SA）架构                      |
| :-----------------: | :----------------------------------------------------------: | :--------------------------------------------------------: |
|      支持功能       |                         仅支持 eMBB                          |                        全部 5G 功能                        |
|      LTE 现网       |             需要升级 LTE 基站以及核心网支持 NSA              |                       不影响现网 LTE                       |
|        终端         | 5G NR 下需要提供 Customized 4G NAS UE with 5G RRC；eLTE理论支持 LTE 终端 |     5G NR 下使用 5G UE ；LTE 终端在 LTE 网络下继续使用     |
| 5G 新频 NR 以及天线 |                      无论高低频全部新增                      |                     无论高低频全部新增                     |
|       核心网        |   初期只需升级现网 EPC；后期可选择新建 5G 核心网支持 eLTE    |                       新增 5G 核心网                       |
|      初期成本       |                              低                              |                             高                             |
|    后期维护成本     |                高，升级软件需要升级 LTE 基站                 |                             低                             |
|        组网         |                 复杂，需要考虑到 LTE 的链路                  |                            简单                            |
|       IOT对接       | 不需要 5G NR 接入与核心网跨异厂家 IOT 测试 LTE 或 eLTE 与升级后的 EPC IOT 对接验证 | 需要 5G NR 与 5G 核心网跨异厂家 IOT 测试成熟，需要较长时间 |
|        演进         |                可以通过生机与网络调整变为 SA                 |                       SA 为最终模式                        |

### 1.3.2 MR-DC 技术

MR-DC（Multi-RAT Dual Connectivity），多接入网技术双连接，是指一部终端可以同时连接 4G 网络和 5G 网络，同时使用两个网络进行业务，此时终端需要具备两个 MAC 实体，支持双发双收，对用不同的网络架构，双连接有不同的名称，不同场景下的 DC 名称如表 1 - 8 所示，

<div align = "center"><b>表1-8 不同场景下 DC 的名称</bb></div>

![不同场景下DC的名称](G:/%E6%96%87%E4%BB%B6%E5%A4%B9/%E5%AD%A6%E4%B9%A0/%E7%AB%9E%E8%B5%9B/%E5%A4%A7%E5%94%90/5G%E7%BD%91%E7%BB%9C%E6%9E%B6%E6%9E%84%E4%B8%8E%E7%BB%84%E7%BD%91%E9%83%A8%E7%BD%B2/%E4%B8%8D%E5%90%8C%E5%9C%BA%E6%99%AF%E4%B8%8BDC%E7%9A%84%E5%90%8D%E7%A7%B0.png)

以 option 3x 组网场景为例，

从控制面看：

网络侧 MN（eNB）和终端之间会建立面向核心网的控制平面连接，维护唯一的 RRC 状态。MN（eNB）和 SN（gNB）具有各自的 RRC 实体，可以生成要发送到终端的 RRC PDU（Protocol Data Unit， 协议数据单元），NSA option 3x 控制面协议栈如下图 1 - 25所示：

![NSA option 3x 控制面协议栈](G:/%E6%96%87%E4%BB%B6%E5%A4%B9/%E5%AD%A6%E4%B9%A0/%E7%AB%9E%E8%B5%9B/%E5%A4%A7%E5%94%90/5G%E7%BD%91%E7%BB%9C%E6%9E%B6%E6%9E%84%E4%B8%8E%E7%BB%84%E7%BD%91%E9%83%A8%E7%BD%B2/NSA%20option%203x%20%E6%8E%A7%E5%88%B6%E9%9D%A2%E5%8D%8F%E8%AE%AE%E6%A0%88.png)

从用户面看：

DC 场景下，UE 和网络可能建立 MCG Bearer、SCG Beareer 和 Split Bearer。

NSA option 3x 用户面承载概念如下图 1 - 26 所示：

![NSA option 3x 用户面承载概念](G:/%E6%96%87%E4%BB%B6%E5%A4%B9/%E5%AD%A6%E4%B9%A0/%E7%AB%9E%E8%B5%9B/%E5%A4%A7%E5%94%90/5G%E7%BD%91%E7%BB%9C%E6%9E%B6%E6%9E%84%E4%B8%8E%E7%BB%84%E7%BD%91%E9%83%A8%E7%BD%B2/NSA%20option%203x%20%E7%94%A8%E6%88%B7%E9%9D%A2%E6%89%BF%E8%BD%BD%E6%A6%82%E5%BF%B5.png)

- MCS：主小区组
- SCG：辅小区组
- MN：Master Node
- SN：Secondary Node

MN 提供到核心网的控制面连接，SN 不提供与核心网的控制面连接，只为 UE 提供额外的资源。MN 和 SN 之间通过网络接口连接起来，至少 MN 要与核心网连接，SN 可以与核心网连接，也可以不跟核心网连接。

------

DC 与 CA（Carrier Aggregation，载波聚合）是一对极易混合的概念，3GPP 在 R10 版本引入 CA 这一概念， CA 技术中终端也会与多个接入网网元建立连接，但是控制面连接仅有一个，双连接与载波聚合的对比如下表 1 - 9 所示，

<div align = "center"><b>表1-9 DC 与 CA 的对比</bb></div>

![DC与CA的对比](G:/%E6%96%87%E4%BB%B6%E5%A4%B9/%E5%AD%A6%E4%B9%A0/%E7%AB%9E%E8%B5%9B/%E5%A4%A7%E5%94%90/5G%E7%BD%91%E7%BB%9C%E6%9E%B6%E6%9E%84%E4%B8%8E%E7%BB%84%E7%BD%91%E9%83%A8%E7%BD%B2/DC%E4%B8%8ECA%E7%9A%84%E5%AF%B9%E6%AF%94.png)

### 1.3.3 CU/DU 组网部署

根据不同业务和部署场景，NR 架构总体可以分为 CU 和 DU 两级，但是实际部署可以出现 CU、DU 和 AAU 分离的三级配置，也可以出现 AAU（Active Antenna Unit） 直接连入中心节点。

NR 的不同网络结构示意图如下图 1 - 27 所示，

![NR的不同网络结构示意图](G:/%E6%96%87%E4%BB%B6%E5%A4%B9/%E5%AD%A6%E4%B9%A0/%E7%AB%9E%E8%B5%9B/%E5%A4%A7%E5%94%90/5G%E7%BD%91%E7%BB%9C%E6%9E%B6%E6%9E%84%E4%B8%8E%E7%BB%84%E7%BD%91%E9%83%A8%E7%BD%B2/NR%E7%9A%84%E4%B8%8D%E5%90%8C%E7%BD%91%E7%BB%9C%E7%BB%93%E6%9E%84%E7%A4%BA%E6%84%8F%E5%9B%BE.png)

<div align = "center"><b>图1-27 NR 的不同网络结构示意图</bb></div>

为了支持 eMMB 业务的覆盖和容量需求，CU 和 DU 需要进行分离部署，分为两种形式：Macro（宏）方式和 Micro（微）方式，CU/DU 分离 Macro 和 Micro 组网部署如图 1- 28 所示，

 ![CUDU 分离Macro 和 Micro 组网部署](G:/%E6%96%87%E4%BB%B6%E5%A4%B9/%E5%AD%A6%E4%B9%A0/%E7%AB%9E%E8%B5%9B/%E5%A4%A7%E5%94%90/5G%E7%BD%91%E7%BB%9C%E6%9E%B6%E6%9E%84%E4%B8%8E%E7%BB%84%E7%BD%91%E9%83%A8%E7%BD%B2/CUDU%20%E5%88%86%E7%A6%BBMacro%20%E5%92%8C%20Micro%20%E7%BB%84%E7%BD%91%E9%83%A8%E7%BD%B2.png)

<div align = "center"><b>图1-28 CU/DU 分离 Macro 和 Micro 组网部署</bb></div>

当业务容量需求变高，在密集部署情况下，基于理想前传条件，多个 DU 可以联合部署，形成基带池，提高基站资源池的利用率，并且可以利用多小区写作传输和协作处理以提高网络的覆盖和容量。CU/DU 分离 DU 资源池组网方式如图 1 - 29 所示，

![CUDU 分离 DU 资源池组网部署](G:/%E6%96%87%E4%BB%B6%E5%A4%B9/%E5%AD%A6%E4%B9%A0/%E7%AB%9E%E8%B5%9B/%E5%A4%A7%E5%94%90/5G%E7%BD%91%E7%BB%9C%E6%9E%B6%E6%9E%84%E4%B8%8E%E7%BB%84%E7%BD%91%E9%83%A8%E7%BD%B2/CUDU%20%E5%88%86%E7%A6%BB%20DU%20%E8%B5%84%E6%BA%90%E6%B1%A0%E7%BB%84%E7%BD%91%E9%83%A8%E7%BD%B2.png)

<div align = "center"><b>图1-29 CU/DU 分离 DU 资源池组网部署</bb></div>

语音业务对带宽和实验要求不高，此时 DU 可以部署在基站侧；对于大带宽低时延业务（如视频或者虚拟现实），一般需要高速传输网络或者光纤直接连接到中心机房，并且在中心机房部署缓存服务器，以降低时延并提升用户体验。CU/DU 分离针对高时延和低时延部署方式如图 1 - 30 所示，

![CUDU 分离针对高时延和低时延部署方式](G:/%E6%96%87%E4%BB%B6%E5%A4%B9/%E5%AD%A6%E4%B9%A0/%E7%AB%9E%E8%B5%9B/%E5%A4%A7%E5%94%90/5G%E7%BD%91%E7%BB%9C%E6%9E%B6%E6%9E%84%E4%B8%8E%E7%BB%84%E7%BD%91%E9%83%A8%E7%BD%B2/CUDU%20%E5%88%86%E7%A6%BB%E9%92%88%E5%AF%B9%E9%AB%98%E6%97%B6%E5%BB%B6%E5%92%8C%E4%BD%8E%E6%97%B6%E5%BB%B6%E9%83%A8%E7%BD%B2%E6%96%B9%E5%BC%8F.png)

<div align = "center"><b>图1-30 CU/DU 分离针对高时延和低时延部署方式</bb></div>

对于面向垂直行业的机器通信业务，在建设 5G 网络时，需要考虑机器通信的特点。大规模机器通信普遍对时延要求较低，其特点有两个：

- 数据量少而且站点稀疏；
- 站点数量多，且分布密集。

CU/DU 分离针对 eMTC 的部署方式如图 1 - 31 所示，

![CUDU 分离针对mMTC的部署方式](G:/%E6%96%87%E4%BB%B6%E5%A4%B9/%E5%AD%A6%E4%B9%A0/%E7%AB%9E%E8%B5%9B/%E5%A4%A7%E5%94%90/5G%E7%BD%91%E7%BB%9C%E6%9E%B6%E6%9E%84%E4%B8%8E%E7%BB%84%E7%BD%91%E9%83%A8%E7%BD%B2/CUDU%20%E5%88%86%E7%A6%BB%E9%92%88%E5%AF%B9mMTC%E7%9A%84%E9%83%A8%E7%BD%B2%E6%96%B9%E5%BC%8F.png)

<div align = "center"><b>图1-31 CU/DU 分离针对mMTC的部署方式</bb></div>

参考网页：

1. [5G系列培训-5G网络架构与组网部署（第一章） (yunxuetang.cn)](https://dtmobile.yunxuetang.cn/kng/o2ostudy/package/62dcc07d094043b0909411eaaba7bda9_2b13ad81fea34bb7ae2d9446ce0d2110.html?uniqueid=1709640278223)
2. [深入了解服务注册与发现 - 知乎 (zhihu.com)](https://zhuanlan.zhihu.com/p/161277955)
3. [5G学习之路——认识CU、DU_cu du-CSDN博客](https://blog.csdn.net/u010378992/article/details/107749266)
4. [关于5G的NSA和SA，看完秒懂！ - 知乎 (zhihu.com)](https://zhuanlan.zhihu.com/p/38067837)
5. [sn和mn的区别_百度知道 (baidu.com)](https://zhidao.baidu.com/question/1903651035827107860.html)

